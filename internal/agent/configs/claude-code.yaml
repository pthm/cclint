name: claude-code

entrypoints:
  - CLAUDE.md
  - .claude/CLAUDE.md
  - .claude/settings.json
  - .claude/settings.local.json
  - .mcp.json

file_patterns:
  - ".claude/**/*.md"
  - ".claude/**/*.json"
  - ".claude/commands/**/*"
  - ".claude/agents/**/*.md"

reference_patterns:
  # @ file references (e.g., @AGENTS.md, @src/file.ts, @./config.md)
  # Requires @ at start of line or after whitespace/brackets, followed by filename with extension
  - regex: '(?:^|[\s\(>\[])@([\w./][^\s\)>\]]+\.\w+)'
    type: file

  # Backtick-quoted absolute paths (e.g., `/CABLE.md`, `/.claude/config.md`)
  # Excludes globs (*) and commands (spaces)
  - regex: '`(/[^`*\s]+\.[a-zA-Z0-9]+)`'
    type: file

  # Backtick-quoted relative paths (e.g., `src/file.ts`, `./config.md`)
  # Excludes globs (*) and commands (spaces)
  - regex: '`([a-zA-Z.][^`*\s]*\.[a-zA-Z0-9]+)`'
    type: file

  # Relative file paths in quotes
  - regex: '"(\./[^"]+)"'
    type: file

  # HTTP/HTTPS URLs
  - regex: 'https?://[^\s\)>\]"''`]+'
    type: url

  # MCP server references
  - regex: '"mcpServers":\s*\{[^}]*"([^"]+)"'
    type: mcp_server

  # Tool references in instructions
  - regex: '\b(Read|Write|Edit|Bash|Glob|Grep|Task|WebFetch|WebSearch)\s+tool'
    type: tool

  # Subagent references
  - regex: 'subagent[_-]?type["\s:=]+["\''`]?(\w+)'
    type: subagent

  # Skill references (slash commands) - lowercase only, must be word-bounded
  # Matches /commit, /help, /review-pr but not /CABLE.md or /path/to/file
  - regex: '(?:^|\s)/([a-z][-a-z0-9]*)(?:\s|$|[,!?;:])'
    type: skill

markers:
  high_priority:
    - "IMPORTANT"
    - "CRITICAL"
    - "MUST"
    - "NEVER"
    - "ALWAYS"
    - "REQUIRED"
    - "DO NOT"
    - "WARNING"

  medium_priority:
    - "SHOULD"
    - "RECOMMENDED"
    - "PREFER"
    - "NOTE"
    - "TIP"
    - "AVOID"

  low_priority:
    - "OPTIONAL"
    - "CONSIDER"
    - "MAY"
    - "MIGHT"
    - "COULD"

  sections:
    - "# "
    - "## "
    - "### "
